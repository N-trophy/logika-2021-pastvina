{% extends "pastvina/base.html" %}
{% load extras %}

{% block title %} Hra {% endblock%}

{% block head %}
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
{% endblock %}

{% block content %}
<section class="padding-small light">
    <h1>Vítejte na pastvině</h1>
</section>
<section class="padding-small dark">
    <h2>Pravidla</h2>
    <p>
        <ul>
            <li>Nejezte vzácné druhy květin.</li>
            <li>Netrkejte ostatní kozy.</li>
        </ul>
    </p>
</section>

<section class="padding-small light">
    <h2>Přehled plodin</h2>
    <div class="container centered">
        <table class="table-all">
            <tr>
                <th>Název</th>
                <th>Doba růstu</th>
                <th>Doba kažení</th>
                <th>Cena nákup</th>
                <th>Cena prodej</th>
                <th>Výživová hodnota</th>
            </tr>
            {% for crop in crops %}
            <tr>
                <td>{{ crop.name }}</td>
                <td>{{ crop.growth_time }}</td>
                <td>{{ crop.rotting_time }}</td>
                <td><span id="crop-buy-price-{{ crop.id }}"></span></td>
                <td><span id="crop-sell-price-{{ crop.id }}"></span></td>
                <td>{{ crop.feed_value }}</td>
            </tr>
            {% endfor %}
        </table>
    </div>
</section>

<section class="padding-small light">
        {% for crop in crops %}
        <div class="container centered control-box">
            <div class="quarter brick">
                <input class="full-width input" type="number">
                <button class="full-width input">Koupit</button>
            </div>
            {% include "pastvina/parts/crop_production_chart.html" with weeks=crop.growth_time color=crop.color name=crop.name name_genitive=crop.name_genitive id=crop.id %}
            {% include "pastvina/parts/crop_storage_chart.html" with weeks=crop.growth_time color=crop.color name=crop.name name_genitive=crop.name_genitive id=crop.id %}
            <div class="quarter brick">
                <input class="full-width input" type="number">
                <button class="full-width input">Prodat</button>
                <input class="full-width input" type="number">
                <button class="full-width input">Krmit</button>
            </div>
        </div>
        {% endfor %}
</section>

<section class="padding-small light">
    <h2>Přehled dobytka</h2>
    <div class="container centered">
        <table class="table-all">
            <tr>
                <th>Název</th>
                <th>Doba růstu</th>
                <th>Cena nákup</th>
                <th>Cena prodej</th>
                <th>Spotřeba</th>
            </tr>
            {% for ls in livestock %}
            <tr>
                <td>{{ ls.name }}</td>
                <td>{{ ls.growth_time }}</td>
                <td><span id="ls-buy-price-{{ ls.id }}"></span></td>
                <td><span id="ls-sell-price-{{ ls.id }}"></span></td>
                <td>{{ ls.consumption }}</td>
            </tr>
            {% endfor %}
        </table>
    </div>
</section>

<section class="padding-small light">
        {% for ls in livestock %}
        <div class="container centered control-box">
            <div class="quarter brick">
                <input class="full-width input" type="number">
                <button class="full-width input">Koupit</button>
            </div>
            {% include "pastvina/parts/livestock_production_chart.html" with weeks=ls.growth_time color=ls.color name=ls.name name_genitive=ls.name_genitive id=ls.id %}
            <div class="quarter brick">
                <input class="full-width input" type="number">
                <button class="full-width input">Prodat</button>
            </div>
        </div>
        {% endfor %}
</section>

<script>
    let update_charts_text = `{
    "money": 100,
    "livestock": [
        {
            "name": "Tučňáci",
            "id": 1,
            "buy": 100,
            "sell": 100,
            "production": [0, 1]
        },
        {
            "name": "Kozy",
            "id": 2,
            "buy": 50,
            "sell": 70,
            "production": [0, 1, 2]
        }
    ],
    "crops": [
        {
            "name": "Melouny",
            "id": 1,
            "buy": 10,
            "sell": 10,
            "production": [0, 1, 2, 3, 4, 5],
            "storage": [2,5,4]
        },
        {
            "name": "Oves",
            "id": 2,
            "buy": 5,
            "sell": 4,
            "production": [0, 1, 2, 3, 4, 8, 9, 10],
            "storage": [4,5,6]
        }
    ]
}`;
    update_charts(update_charts_text);
</script>

{% endblock %}
